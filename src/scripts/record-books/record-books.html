<div class="record-books">
  <back-link></back-link>

  <h1 translate="RecordBooks"></h1>

  <div class="record-book" ng-repeat="book in $ctrl.recordBooks | orderBy:'startDate' track by $index">
    <div class="title">
      <div class="collapse-handle" ng-click="$ctrl.toggleSection(book.hash)">
        <i class="fa collapse" ng-class="$ctrl.settings.collapsedSections[book.hash] ? 'fa-plus-square-o': 'fa-minus-square-o'"></i>
        <img class="book-icon" ng-src="{{::book.icon | bungieIcon}}" />
        {{::book.name}}
        <span class="record-book-completion">{{book.completedCount}} / {{book.recordCount}}</span>
      </div>
    </div>
    <div ng-if="!$ctrl.settings.collapsedSections[book.hash]">
      <!-- <img class="book-icon" ng-src="{{::book.icon | bungieIcon}}" />-->

      <div class="record-book-page" ng-repeat="page in book.pages track by $index">
        <h2>{{::page.name}}</h2>
        <p>{{::page.description}}</p>

        <div class="record-page-records" ng-if="page.records.length">
          <div class="record" ng-repeat="record in page.records track by $index">
            <div class="record-icon" ng-class="{ complete: record.complete }" ng-style="{{::record.icon | bungieBackground}}"></div>
            <div class="record-info">
              <h3>{{::record.name}}</h3>
              <p>{{::record.description}}</p>
              <dim-objectives objectives="record.objectives"></dim-objectives>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
