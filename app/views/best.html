<div ng-controller="dimMinMaxCtrl as normal" style="min-width:900px">
  <a ui-sref='inventory' class="link"><i class='fa fa-arrow-circle-left' style='padding-right:5px;'></i>Back to DIM</a>
  <h1>Normalization Calculator</h1>

  <p>All gear and their stats are normalized to light level <input type='number' ng-model='normal.normalize' placeholder='320' ng-change='normal.normalizeBuckets()' />.<br/>
    The stats displayed are the BASE stats for the item.</p>

  <span class="link" ng-click="help=!help">Click here for more information</span>

  <div ng-show="help">
    <p>This page will help you determine what your best gear is.</p>
    <p>When an item in infused to a higher light level, its stats also go up with it.<br/>
      This page normalizes all of your gear to 320 light, so you can see the highest value a peice of armor will have.<br/>
      The perks/bonus that increase intellect/dis/str are NOT included, only the "base" stats are shown.</p>
    <p>The "best" gear is defined by having the highest value of the following:</p>
    <ul>
      <li>Intellect</li>
      <li>Discipline</li>
      <li>Strength</li>
      <li>Intellect + Discipline</li>
      <li>Intellect + Strength</li>
      <li>Discipline + Strength</li>
    </ul>
  </div>

  <p>Class: <select ng-model='normal.active' ng-change='normal.normalizeBuckets()'>
    <option value='titan'>Titan</option>
    <option value='hunter'>Hunter</option>
    <option value='warlock'>Warlock</option>
  </select></p>
  <p>Armor: <select ng-model='normal.type' ng-change='normal.normalizeBuckets()' ng-options="bucket as bucket for (bucket, data) in normal.ranked"></select> (+{{normal.getBonus(normal.normalize, normal.type)}} bonus excluded)</p>

  <div ng-repeat="(type, items) in normal.ranked[normal.type]">
    <h3 ng-bind="type"></h3>
    <span style='display: inline-block; margin-right: 20px'>
      <div><small>Intellect</small></div>
      <div><small>Discipline</small></div>
      <div><small>Strength</small></div>
    </span>
    <span ng-repeat="item in items">
      <div style='display: inline-block'>
        <div style='display: inline-block'>
          <div ng-repeat="stat in item.stats track by $index">
            <small ng-bind="item.normalStats[$index].base"></small>
          </div>
        </div>
        <div dim-store-item item-data="item"></div>
      </div>
    </span>
  </div>
</div>
